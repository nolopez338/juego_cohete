<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Juego de puertas de cohetes</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<!-- UI stays normal size -->
<div id="superMenu" class="supermenu">
    <div class="superMenuHeader">
        <span class="superMenuTitle">Menú</span>
        <button id="superMenuToggle" class="panelToggle" aria-label="Alternar menú" aria-expanded="true">‹</button>
    </div>

    <div id="topPanelRow">
        <div id="generalConfigPanel" class="panel">
            <div class="panelHeader">
                <span>Configuración general</span>
                <button class="panelToggle" data-target="generalConfigPanel" aria-label="Alternar panel de configuración general">−</button>
            </div>
            <div class="panelBody">
                <div class="controlRow">
                    <span id="rocketSizeLabel">Tamaño del cohete</span>
                    <input type="range" id="rocketSizeSlider" min="0.5" max="2" step="0.05" value="1">
                    <button id="rocketSizeSetBtn" class="secondaryBtn">Fijar</button>
                </div>

                <div class="controlRow actionRow">
                    <button id="startBtn" class="secondaryBtn">Iniciar</button>
                </div>

                <div class="controlRow">
                    <span id="trailWidthLabel">Ancho de trayectoria</span>
                    <input type="range" id="trailWidthSlider" min="1" max="10" step="0.5" value="3">
                    <button id="trailWidthSetBtn" class="secondaryBtn">Fijar</button>
                </div>

                <div class="controlRow">
                    <span id="gateWidthLabel">Ancho de la puerta</span>
                    <input type="range" id="gateWidthSlider" min="1" max="10" step="0.5" value="3">
                    <button id="gateWidthSetBtn" class="secondaryBtn">Fijar</button>
                </div>

                <div class="controlRow">
                    <span id="axisWidthLabel">Ancho de ejes XY</span>
                    <input type="range" id="axisWidthSlider" min="0.5" max="6" step="0.1" value="2">
                    <button id="axisWidthSetBtn" class="secondaryBtn">Fijar</button>
                </div>

                <div class="controlRow actionRow">
                    <button id="resetBtn" class="secondaryBtn">Reintentar</button>
                    <button id="restartBtn" class="secondaryBtn">Reiniciar</button>
                    <button id="nextBtn" class="secondaryBtn">Siguiente</button>
                </div>

                <div class="controlRow actionRow">
                    <button id="downloadStatsBtn" class="secondaryBtn">Descargar estadísticas (PDF)</button>
                </div>
            </div>
        </div>

        <div id="topControls" class="panel">
            <div class="panelHeader">
                <span>Controles del cohete</span>
                <button class="panelToggle" data-target="topControls" aria-label="Alternar panel de controles">−</button>
            </div>
            <div class="panelBody">
                <div class="controlRow">
                    <span>Posición Y</span>
                    <input type="number" id="yMinInput" class="rangeLimitInput" value="-100" step="any">
                    <input type="range" id="ySlider" min="-100" max="100" value="0">
                    <input type="number" id="yInput" class="numInput" min="-100" max="100" value="0" step="any">
                    <input type="number" id="yMaxInput" class="rangeLimitInput" value="100" step="any">
                </div>

                <div class="controlRow polynomialRow">
                    <input type="number" id="slopeInput" class="numInput coefficientInput" step="any" value="0">
                    <span class="polyLabel">x +</span>
                    <input type="number" id="quadInput" class="numInput coefficientInput" step="any" value="0">
                    <span class="polyLabel">x² +</span>
                    <input type="number" id="cubicInput" class="numInput coefficientInput" step="any" value="0">
                    <span class="polyLabel">x³</span>
                </div>
            </div>
        </div>

        <div id="gateControls" class="panel">
            <div class="panelHeader">
                <span>Puertas</span>
                <button class="panelToggle" data-target="gateControls" aria-label="Alternar panel de puertas">−</button>
            </div>
            <div class="panelBody">
                <div class="controlRow">
                    <span>X</span>
                    <input type="number" id="gateXInput" class="numInput" value="0" step="any">
                    <span>Y1</span>
                    <input type="number" id="gateY1Input" class="numInput" value="-200" step="any">
                    <span>Y2</span>
                    <input type="number" id="gateY2Input" class="numInput" value="200" step="any">
                    <button id="addGateBtn">Agregar puerta</button>
                </div>
                <div id="gateList"></div>
            </div>
        </div>

        <div id="savedLevelsPanel" class="panel">
            <div class="panelHeader">
                <span>Niveles guardados</span>
                <button class="panelToggle" data-target="savedLevelsPanel" aria-label="Alternar panel de niveles guardados">−</button>
            </div>
            <div class="panelBody">
                <div id="savedLevelsList" class="savedLevelButtons"></div>
            </div>
        </div>
    </div>
</div>

<button id="collapsedStartBtn" class="secondaryBtn collapsedStartBtn" aria-label="Iniciar cuando el menú está minimizado">Iniciar</button>

<div id="scoreDisplay">
    <div class="scoreRow">
        <span>Puertas totales en esta ejecución:</span> <span id="totalGatesCount">0</span>
    </div>
    <div class="scoreRow">
        <span style="color:lime;">Aciertos:</span> <span id="hitsCount">0</span>
    </div>
    <div id="hitsDots"></div>
    <div class="scoreRow">
        <span style="color:red;">Fallos:</span> <span id="missCount">0</span>
    </div>
    <div id="missDots"></div>
</div>

<!-- MAP ONLY (zoom + pan) -->
    <div id="zoomContainer">
        <div id="gameArea">
            <svg id="gridSvg" xmlns="http://www.w3.org/2000/svg"></svg>
            <svg id="gateSvg" xmlns="http://www.w3.org/2000/svg"></svg>
            <svg id="trailSvg" xmlns="http://www.w3.org/2000/svg"></svg>
            <div id="rocket" class="rocket" aria-hidden="true">
                <svg class="rocketIcon" viewBox="0 0 60 90" role="presentation" focusable="false">
                    <defs>
                        <linearGradient id="rocketBody" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" stop-color="#ff5f6d" />
                            <stop offset="100%" stop-color="#ffc371" />
                        </linearGradient>
                    </defs>
                    <g>
                        <path d="M30 4 C34 12 42 32 42 50 C42 64 37 82 30 86 C23 82 18 64 18 50 C18 32 26 12 30 4 Z" fill="url(#rocketBody)" stroke="#7a1b1b" stroke-width="2" />
                        <ellipse cx="30" cy="45" rx="9" ry="12" fill="#0d2c54" stroke="#0b1e38" stroke-width="2" />
                        <path d="M18 52 L8 64 L20 60 Z" fill="#f4a261" stroke="#c77422" stroke-width="2" />
                        <path d="M42 52 L52 64 L40 60 Z" fill="#f4a261" stroke="#c77422" stroke-width="2" />
                        <path d="M26 84 C28 88 32 88 34 84 C32 82 28 82 26 84 Z" fill="#f77f00" stroke="#c85c02" stroke-width="2" />
                    </g>
                </svg>
            </div>
        </div>
    </div>

<script src="script.js"></script>
</body>
</html>
